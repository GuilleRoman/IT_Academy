<!-- 
    Fonaments de la programació
    M6_3 Exercici 3
    Juan José Campos Caballero
-->

<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="estilsBasics.css" rel="stylesheet" type="text/css">
    <title> fdlp: M6_3 exercici 3 </title>
    
</head>
<body>
    <header class="capcelera">
        <h1 class="enLinia">IT ACADEMY</h1>
        <h2 class="enLinia">Fonaments de la programació</h2>
        <h2>M6.3 exercici 3</h2>
        <h3>Enunciat:</h3>
        <h4>
            Donat un array de nombres, el programa ha de mostrar per pantalla, el vector amb els nombres ordenats de menor a major
            <br><br>

            Para que la función sort ordene de forma distinta a la predeterminada se le debe pasar como parámetro una función de comparación. Por ejemplo:<br>

            [3, 5, 1, 7, 4].sort (funcionDeComparacion);<br><br>
            
            Donde funcionDeComparacion debe ser una función que reciba como parámetros dos elementos del tipo con el que trabaja el array y devuelva un número negativo si el primer elemento debe ordenarse antes que el segundo, cero si ambos elementos tienen igual orden, o un número positivo si el segundo elemento debe ordenarse antes que el primero.<br>
            <br><br>
            Definir una función de comparación que permita ordenar un array numérico de menor a mayor es sencillo:<br>
            
            function funcionDeComparacion (elem1, elem2) { return elem1 – elem2; }<br>

        </h4>
    </header>
    <hr>
        <br><br>
        <label class="labelGran">Array generat: </label>
        <label id="labelGenerat" class="labelGran"></label> 
        
        <br><br>
        <label class="labelGran">Array ordenat Bubble Sort : </label> 
        <label id="labelOrdenatBombolla" class="labelGran"></label><br>
        <br>
        <textarea id="resultat" cols="35" rows="20" ></textarea><br><br>
        
        <button class="button" id="iniciar" onclick="main()"> Generar Array  </button>        
        <button class="button" id="ordenar" onclick="ordenar()"> Ordenar Array </button>  

        <script>
            
            // Ocultem el button ordenar fins que no es generi un array de nombres.
            document.getElementById("ordenar").style.display="none";

            // main del button -------------------------------------------------
            function main(){
                let arreglo=[];           // Arreglo inicial
                let termes=10;           // Nombre d'elements de l'arreglo
                let ArregloOrdenat=[];  // String amb la frase a l'inreves. 

                //Eliminem ordenació anterior si existís               
                document.getElementById("labelOrdenatBombolla").innerHTML="";
                document.getElementById("resultat").innerHTML="";

                //Generem un arreglo int de n termes
                arreglo=generarArreglo(termes);
                
                //mostrem l'arreglo generat.
                document.getElementById("labelGenerat").innerHTML=arreglo;
                document.getElementById("ordenar").style.display="inline"; //mostrem botó ordenar.
                            
            } 

            function ordenar(){
                
                // Recupero l'arreglo en format String
                let arreglo=document.getElementById("labelGenerat").innerHTML;
                
                // el passo a format arreglo de strings
                let arregloDef=arreglo.split(",");

                // passo a arreglo de integers
                let arregloFinal= arregloDef.map((i) => Number(i));
                console.log("Array inical recuperat : "+arregloFinal);                

                //ordenem l'arreglo amb mètode buble sort.
                console.log("Array inical abans de ordenar bombolla: "+arregloFinal);
                let arregloOrdenatBombolla=bombolla(arregloFinal);
                document.getElementById("labelOrdenatBombolla").innerHTML=arregloOrdenatBombolla;

                // Ocultem el button ordenar fins que no es generi un array de nombres.
                document.getElementById("ordenar").style.display="none";
            }

             //----------------------------------------------------------------------------
            // Generar un arreglo de n elements de tipus int. -----------------------------
            function generarArreglo(numero){
                //Definició de variables.
                let arreglo=[];    //arreglo a generar.
                let valor;  // valor del numero aleatori generat (1..100)

                for(let i=0;i<numero;i++){
                   valor=integerAleatori(1,100);
                   arreglo.push(valor);
                }              
                
                return arreglo;
            }

            
           //-------------------------------------------------------------------------
          // funció ordena un array d'integers asc.
         //  mètode de la bombolla  
        //----------------------------------------------------------------------------
        function bombolla(arreglo){
            let intercanvi=0;            
            let swap=false;
            let ordenat=false;
            let pasades=0;
            let arregloOrdenat=arreglo;
             
            do{                
                for(let i=0;i<arregloOrdenat.length-1;i++){
                    if(arregloOrdenat[i+1]<arregloOrdenat[i]){
                        intercanvi=arregloOrdenat[i];
                        arregloOrdenat[i]=arregloOrdenat[i+1];
                        arregloOrdenat[i+1]=intercanvi;
                        swap=true; 
                    } 
                    document.getElementById("resultat").innerHTML+=": "+arregloOrdenat+"\n";                                               
                }

                pasades++;
                document.getElementById("resultat").innerHTML+="------- pasada "+pasades+"---------->\n";    
                 

                if(swap==false){
                     ordenat=true;
                }
                 
                swap=false;
                                
            }while(ordenat==false);   
               
            return arregloOrdenat;   
            
        }

            // funció que genera un nombre aleatori entre max i min
            //-------------------------------------------------------------------------------
            function integerAleatori(min,max){
                let valor=Math.floor((Math.random()*(max-min))+min);
                return valor;
            }
            


        </script>    


    </div>    
</body>
</html>